language: cpp
compiler: gcc
before_install:
  - sudo apt-get update -qq
  - sudo apt-get install -qq cmake xorg-server-source libgnutls-dev
        libfltk1.3-dev libjpeg-dev libpng-dev libfontconfig-dev
        libxft-dev libxinerama-dev gettext
# Define FL_SOCKET so we can build against fltk-1.3.0 (Travis CI build
# hosts have this older version)
script: tar Jxf /usr/src/xorg-server.tar.xz -C unix/xserver --strip-components=1
        && cmake -G "Unix Makefiles" -D "CMAKE_CXX_FLAGS=-DFL_SOCKET=int" .
        && make
